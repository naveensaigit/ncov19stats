{% extends "layout.html" %}
{% block css %}
<link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/stats.css')}}">
{% endblock %}
{% block js %}
<script src="{{url_for('static',filename='js/stats.js')}}"></script>
{% endblock %}
{% block content %}
    <script>
      function report(statename){
    statename=statename.trim();
    changePiePlot(statename);
    changeRPlot( statename,{{ r0|safe}} );
    changeDoubPlot( statename, {{ drate|safe }});
    changeStat(statename,{{ total|safe }},{{ drate|safe }},{{ grate|safe }});
    console.log('changed');
  }
    </script>
    
    <h1 style="margin-top:30px;text-align: center;">State-Wise Stats</h1>
    <div style="text-align: center;">
      <select id="drop" onchange="report(this.value)">
        <option selected value="Total">Total</option>
        {% for i in drate.keys() %}
          {% if i!='Total' %}
          <option value=" {{i}} "> {{ i }} </option>         
          {% endif %}
        {% endfor %}
    </select>
    </div>

    <div id="stat">
    </div>

    <div id="plots">
      <div id="pie">
        <div class="bk-root" id="6422f39e-518d-4907-8d9c-32e446ce7405" data-root-id="33487"></div>
        <script type="application/json" id="33572">
          {"38402553-353d-44d8-9c4c-79ff3ea567eb":{"roots":{"references":[{"attributes":{},"id":"33465","type":"BasicTicker"},{"attributes":{},"id":"33483","type":"BasicTickFormatter"},{"attributes":{"data_source":{"id":"33474","type":"ColumnDataSource"},"glyph":{"id":"33476","type":"Wedge"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"33477","type":"Wedge"},"selection_glyph":null,"view":{"id":"33479","type":"CDSView"}},"id":"33478","type":"GlyphRenderer"},{"attributes":{},"id":"33457","type":"LinearScale"},{"attributes":{"callback":null,"data":{"angle":[4.424778385337737,1.4159290833080758,0.4424778385337737],"color":["#d11515","#1cb826","#4d4b4b"],"status":["Active","Recovered","Deceased"],"values":[100,32,10]},"selected":{"id":"33493","type":"Selection"},"selection_policy":{"id":"33494","type":"UnionRenderers"}},"id":"33474","type":"ColumnDataSource"},{"attributes":{"below":[{"id":"33459","type":"LinearAxis"}],"center":[{"id":"33463","type":"Grid"},{"id":"33468","type":"Grid"},{"id":"33485","type":"Legend"}],"left":[{"id":"33464","type":"LinearAxis"}],"renderers":[{"id":"33478","type":"GlyphRenderer"}],"sizing_mode":"stretch_both","title":{"id":"33449","type":"Title"},"toolbar":{"id":"33470","type":"Toolbar"},"toolbar_location":null,"x_range":{"id":"33451","type":"Range1d"},"x_scale":{"id":"33455","type":"LinearScale"},"y_range":{"id":"33453","type":"DataRange1d"},"y_scale":{"id":"33457","type":"LinearScale"}},"id":"33448","subtype":"Figure","type":"Plot"},{"attributes":{"axis_label":null,"formatter":{"id":"33481","type":"BasicTickFormatter"},"ticker":{"id":"33465","type":"BasicTicker"},"visible":false},"id":"33464","type":"LinearAxis"},{"attributes":{},"id":"33493","type":"Selection"},{"attributes":{"children":[{"id":"33448","subtype":"Figure","type":"Plot"}],"sizing_mode":"stretch_both"},"id":"33487","type":"Column"},{"attributes":{"callback":null,"start":-0.5},"id":"33451","type":"Range1d"},{"attributes":{"axis_label":null,"formatter":{"id":"33483","type":"BasicTickFormatter"},"ticker":{"id":"33460","type":"BasicTicker"},"visible":false},"id":"33459","type":"LinearAxis"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"33469","type":"HoverTool"}]},"id":"33470","type":"Toolbar"},{"attributes":{"items":[{"id":"33486","type":"LegendItem"}]},"id":"33485","type":"Legend"},{"attributes":{"source":{"id":"33474","type":"ColumnDataSource"}},"id":"33479","type":"CDSView"},{"attributes":{"end_angle":{"expr":{"id":"33473","type":"CumSum"},"units":"rad"},"fill_alpha":{"value":0.1},"fill_color":{"value":"#1f77b4"},"line_alpha":{"value":0.1},"line_color":{"value":"#1f77b4"},"radius":{"units":"data","value":0.47},"start_angle":{"expr":{"id":"33472","type":"CumSum"},"units":"rad"},"x":{"value":0},"y":{"value":1}},"id":"33477","type":"Wedge"},{"attributes":{"end_angle":{"expr":{"id":"33473","type":"CumSum"},"units":"rad"},"fill_color":{"field":"color"},"line_color":{"value":null},"radius":{"units":"data","value":0.47},"start_angle":{"expr":{"id":"33472","type":"CumSum"},"units":"rad"},"x":{"value":0},"y":{"value":1}},"id":"33476","type":"Wedge"},{"attributes":{"field":"angle"},"id":"33473","type":"CumSum"},{"attributes":{},"id":"33494","type":"UnionRenderers"},{"attributes":{"callback":null,"tooltips":"@status: @values"},"id":"33469","type":"HoverTool"},{"attributes":{"grid_line_color":null,"ticker":{"id":"33460","type":"BasicTicker"}},"id":"33463","type":"Grid"},{"attributes":{"label":{"field":"status"},"renderers":[{"id":"33478","type":"GlyphRenderer"}]},"id":"33486","type":"LegendItem"},{"attributes":{},"id":"33455","type":"LinearScale"},{"attributes":{"dimension":1,"grid_line_color":null,"ticker":{"id":"33465","type":"BasicTicker"}},"id":"33468","type":"Grid"},{"attributes":{},"id":"33460","type":"BasicTicker"},{"attributes":{"callback":null},"id":"33453","type":"DataRange1d"},{"attributes":{"text":"Cases Distribution"},"id":"33449","type":"Title"},{"attributes":{},"id":"33481","type":"BasicTickFormatter"},{"attributes":{"field":"angle","include_zero":true},"id":"33472","type":"CumSum"}],"root_ids":["33487"]},"title":"Bokeh Application","version":"1.4.0"}}
        </script>
      </div>

      <div id="r0">
        <div class="bk-root" id="a74704f6-967f-42e2-b90f-c8d724de2845" data-root-id="32701"></div>
        <script type="application/json" id="32942">
          {"c7fc271e-1eeb-42fe-a3b0-443965f537bb":{"roots":{"references":[{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","x":{"field":"x"},"y":{"field":"r0"}},"id":"32696","type":"Line"},{"attributes":{},"id":"32718","type":"YearsTicker"},{"attributes":{},"id":"32671","type":"LinearScale"},{"attributes":{},"id":"32721","type":"UnionRenderers"},{"attributes":{"below":[{"id":"32675","type":"DatetimeAxis"}],"center":[{"id":"32679","type":"Grid"},{"id":"32684","type":"Grid"}],"left":[{"id":"32680","type":"LinearAxis"}],"plot_height":300,"renderers":[{"id":"32697","type":"GlyphRenderer"}],"sizing_mode":"stretch_width","title":{"id":"32665","type":"Title"},"toolbar":{"id":"32689","type":"Toolbar"},"x_range":{"id":"32667","type":"DataRange1d"},"x_scale":{"id":"32671","type":"LinearScale"},"y_range":{"id":"32669","type":"DataRange1d"},"y_scale":{"id":"32673","type":"LinearScale"}},"id":"32664","subtype":"Figure","type":"Plot"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"32685","type":"WheelZoomTool"},{"id":"32686","type":"BoxZoomTool"},{"id":"32687","type":"ResetTool"},{"id":"32688","type":"SaveTool"},{"id":"32699","type":"HoverTool"}]},"id":"32689","type":"Toolbar"},{"attributes":{},"id":"32705","type":"DatetimeTickFormatter"},{"attributes":{"overlay":{"id":"32719","type":"BoxAnnotation"}},"id":"32686","type":"BoxZoomTool"},{"attributes":{"num_minor_ticks":5,"tickers":[{"id":"32707","type":"AdaptiveTicker"},{"id":"32708","type":"AdaptiveTicker"},{"id":"32709","type":"AdaptiveTicker"},{"id":"32710","type":"DaysTicker"},{"id":"32711","type":"DaysTicker"},{"id":"32712","type":"DaysTicker"},{"id":"32713","type":"DaysTicker"},{"id":"32714","type":"MonthsTicker"},{"id":"32715","type":"MonthsTicker"},{"id":"32716","type":"MonthsTicker"},{"id":"32717","type":"MonthsTicker"},{"id":"32718","type":"YearsTicker"}]},"id":"32676","type":"DatetimeTicker"},{"attributes":{},"id":"32673","type":"LinearScale"},{"attributes":{"months":[0,4,8]},"id":"32716","type":"MonthsTicker"},{"attributes":{"months":[0,1,2,3,4,5,6,7,8,9,10,11]},"id":"32714","type":"MonthsTicker"},{"attributes":{"months":[0,6]},"id":"32717","type":"MonthsTicker"},{"attributes":{"children":[{"id":"32664","subtype":"Figure","type":"Plot"}],"sizing_mode":"stretch_width"},"id":"32701","type":"Column"},{"attributes":{},"id":"32685","type":"WheelZoomTool"},{"attributes":{"mantissas":[1,2,5],"max_interval":500.0,"num_minor_ticks":0},"id":"32707","type":"AdaptiveTicker"},{"attributes":{},"id":"32687","type":"ResetTool"},{"attributes":{"days":[1,15]},"id":"32713","type":"DaysTicker"},{"attributes":{"formatter":{"id":"32703","type":"BasicTickFormatter"},"ticker":{"id":"32681","type":"BasicTicker"}},"id":"32680","type":"LinearAxis"},{"attributes":{"base":24,"mantissas":[1,2,4,6,8,12],"max_interval":43200000.0,"min_interval":3600000.0,"num_minor_ticks":0},"id":"32709","type":"AdaptiveTicker"},{"attributes":{},"id":"32681","type":"BasicTicker"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"32719","type":"BoxAnnotation"},{"attributes":{"formatter":{"id":"32705","type":"DatetimeTickFormatter"},"ticker":{"id":"32676","type":"DatetimeTicker"}},"id":"32675","type":"DatetimeAxis"},{"attributes":{},"id":"32720","type":"Selection"},{"attributes":{},"id":"32703","type":"BasicTickFormatter"},{"attributes":{"callback":null,"data":{"dates":{{labels}},"r0":{{r0['Karnataka']}},"x":{{dtms}}},"selected":{"id":"32720","type":"Selection"},"selection_policy":{"id":"32721","type":"UnionRenderers"}},"id":"32663","type":"ColumnDataSource"},{"attributes":{"callback":null},"id":"32667","type":"DataRange1d"},{"attributes":{"text":"Basic Reproduction Number"},"id":"32665","type":"Title"},{"attributes":{"line_color":"red","x":{"field":"x"},"y":{"field":"r0"}},"id":"32695","type":"Line"},{"attributes":{"dimension":1,"ticker":{"id":"32681","type":"BasicTicker"}},"id":"32684","type":"Grid"},{"attributes":{"data_source":{"id":"32663","type":"ColumnDataSource"},"glyph":{"id":"32695","type":"Line"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"32696","type":"Line"},"selection_glyph":null,"view":{"id":"32698","type":"CDSView"}},"id":"32697","type":"GlyphRenderer"},{"attributes":{"callback":null,"renderers":[{"id":"32697","type":"GlyphRenderer"}],"tooltips":[["Date","@dates"],["R0","@r0"]]},"id":"32699","type":"HoverTool"},{"attributes":{"days":[1,8,15,22]},"id":"32712","type":"DaysTicker"},{"attributes":{"months":[0,2,4,6,8,10]},"id":"32715","type":"MonthsTicker"},{"attributes":{"callback":null},"id":"32669","type":"DataRange1d"},{"attributes":{"base":60,"mantissas":[1,2,5,10,15,20,30],"max_interval":1800000.0,"min_interval":1000.0,"num_minor_ticks":0},"id":"32708","type":"AdaptiveTicker"},{"attributes":{"source":{"id":"32663","type":"ColumnDataSource"}},"id":"32698","type":"CDSView"},{"attributes":{"days":[1,4,7,10,13,16,19,22,25,28]},"id":"32711","type":"DaysTicker"},{"attributes":{"days":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]},"id":"32710","type":"DaysTicker"},{"attributes":{},"id":"32688","type":"SaveTool"},{"attributes":{"ticker":{"id":"32676","type":"DatetimeTicker"}},"id":"32679","type":"Grid"}],"root_ids":["32701"]},"title":"Bokeh Application","version":"1.4.0"}}
        </script>
      </div>
    </div>
      <div id="doubplot">
        <div class="bk-root" id="68ecc955-4a7f-4502-bd5a-45e4730d62f1" data-root-id="32037"></div>
        <script type="application/json" id="32266">
          {"7f6ae0d0-16dc-45b6-8b9d-fecbe7d8be20":{"roots":{"references":[{"attributes":{"source":{"id":"31921","type":"ColumnDataSource"}},"id":"31956","type":"CDSView"},{"attributes":{"months":[0,6]},"id":"31972","type":"MonthsTicker"},{"attributes":{"below":[{"id":"31933","type":"DatetimeAxis"}],"center":[{"id":"31937","type":"Grid"},{"id":"31942","type":"Grid"},{"id":"31975","type":"Legend"}],"left":[{"id":"31938","type":"LinearAxis"}],"plot_height":300,"renderers":[{"id":"31955","type":"GlyphRenderer"},{"id":"31982","type":"GlyphRenderer"},{"id":"32010","type":"GlyphRenderer"}],"sizing_mode":"stretch_width","title":{"id":"31923","type":"Title"},"toolbar":{"id":"31947","type":"Toolbar"},"x_range":{"id":"31925","type":"DataRange1d"},"x_scale":{"id":"31929","type":"LinearScale"},"y_range":{"id":"31927","type":"DataRange1d"},"y_scale":{"id":"31931","type":"LinearScale"}},"id":"31922","subtype":"Figure","type":"Plot"},{"attributes":{"label":{"value":"Recovered"},"renderers":[{"id":"31982","type":"GlyphRenderer"}]},"id":"32004","type":"LegendItem"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","x":{"field":"x"},"y":{"field":"conf"}},"id":"31954","type":"Line"},{"attributes":{"base":24,"mantissas":[1,2,4,6,8,12],"max_interval":43200000.0,"min_interval":3600000.0,"num_minor_ticks":0},"id":"31964","type":"AdaptiveTicker"},{"attributes":{},"id":"31958","type":"BasicTickFormatter"},{"attributes":{},"id":"31943","type":"WheelZoomTool"},{"attributes":{},"id":"31973","type":"YearsTicker"},{"attributes":{"click_policy":"hide","items":[{"id":"31976","type":"LegendItem"},{"id":"32004","type":"LegendItem"},{"id":"32032","type":"LegendItem"}],"location":"top_right"},"id":"31975","type":"Legend"},{"attributes":{},"id":"31929","type":"LinearScale"},{"attributes":{"bottom_units":"screen","fill_alpha":{"value":0.5},"fill_color":{"value":"lightgrey"},"left_units":"screen","level":"overlay","line_alpha":{"value":1.0},"line_color":{"value":"black"},"line_dash":[4,4],"line_width":{"value":2},"render_mode":"css","right_units":"screen","top_units":"screen"},"id":"31974","type":"BoxAnnotation"},{"attributes":{"base":60,"mantissas":[1,2,5,10,15,20,30],"max_interval":1800000.0,"min_interval":1000.0,"num_minor_ticks":0},"id":"31963","type":"AdaptiveTicker"},{"attributes":{"children":[{"id":"31922","subtype":"Figure","type":"Plot"}],"sizing_mode":"stretch_width"},"id":"32037","type":"Column"},{"attributes":{"callback":null,"renderers":[{"id":"32010","type":"GlyphRenderer"}],"tooltips":[["Date","@dates"],["Deceased Rate","@dec"]]},"id":"32033","type":"HoverTool"},{"attributes":{"line_color":"gray","x":{"field":"x"},"y":{"field":"dec"}},"id":"32008","type":"Line"},{"attributes":{"mantissas":[1,2,5],"max_interval":500.0,"num_minor_ticks":0},"id":"31962","type":"AdaptiveTicker"},{"attributes":{"callback":null},"id":"31927","type":"DataRange1d"},{"attributes":{},"id":"31946","type":"SaveTool"},{"attributes":{"ticker":{"id":"31934","type":"DatetimeTicker"}},"id":"31937","type":"Grid"},{"attributes":{"label":{"value":"Confirmed"},"renderers":[{"id":"31955","type":"GlyphRenderer"}]},"id":"31976","type":"LegendItem"},{"attributes":{"days":["%b %d"]},"id":"32035","type":"DatetimeTickFormatter"},{"attributes":{"days":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31]},"id":"31965","type":"DaysTicker"},{"attributes":{"overlay":{"id":"31974","type":"BoxAnnotation"}},"id":"31944","type":"BoxZoomTool"},{"attributes":{"callback":null,"renderers":[{"id":"31982","type":"GlyphRenderer"}],"tooltips":[["Date","@dates"],["Recovered Rate","@rec"]]},"id":"32005","type":"HoverTool"},{"attributes":{},"id":"31931","type":"LinearScale"},{"attributes":{"callback":null},"id":"31925","type":"DataRange1d"},{"attributes":{"days":[1,4,7,10,13,16,19,22,25,28]},"id":"31966","type":"DaysTicker"},{"attributes":{"days":[1,8,15,22]},"id":"31967","type":"DaysTicker"},{"attributes":{},"id":"32002","type":"Selection"},{"attributes":{"data_source":{"id":"31921","type":"ColumnDataSource"},"glyph":{"id":"31953","type":"Line"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"31954","type":"Line"},"selection_glyph":null,"view":{"id":"31956","type":"CDSView"}},"id":"31955","type":"GlyphRenderer"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","x":{"field":"x"},"y":{"field":"dec"}},"id":"32009","type":"Line"},{"attributes":{"line_color":"green","x":{"field":"x"},"y":{"field":"rec"}},"id":"31980","type":"Line"},{"attributes":{"days":[1,15]},"id":"31968","type":"DaysTicker"},{"attributes":{"data_source":{"id":"31921","type":"ColumnDataSource"},"glyph":{"id":"32008","type":"Line"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"32009","type":"Line"},"selection_glyph":null,"view":{"id":"32011","type":"CDSView"}},"id":"32010","type":"GlyphRenderer"},{"attributes":{"callback":null,"renderers":[{"id":"31955","type":"GlyphRenderer"}],"tooltips":[["Date","@dates"],["Confirmed Rate","@conf"]]},"id":"31977","type":"HoverTool"},{"attributes":{"source":{"id":"31921","type":"ColumnDataSource"}},"id":"31983","type":"CDSView"},{"attributes":{"months":[0,1,2,3,4,5,6,7,8,9,10,11]},"id":"31969","type":"MonthsTicker"},{"attributes":{},"id":"31939","type":"BasicTicker"},{"attributes":{"callback":null,"data":{"conf":{{drate['Karnataka'][0]}},"dates":{{labels}},"dec":{{drate['Karnataka'][2]}},"rec":{{drate['Karnataka'][1]}},"x":{{dtms}}},"selected":{"id":"32002","type":"Selection"},"selection_policy":{"id":"32003","type":"UnionRenderers"}},"id":"31921","type":"ColumnDataSource"},{"attributes":{},"id":"32003","type":"UnionRenderers"},{"attributes":{"text":"Cases Doubling Rates"},"id":"31923","type":"Title"},{"attributes":{"formatter":{"id":"32035","type":"DatetimeTickFormatter"},"ticker":{"id":"31934","type":"DatetimeTicker"}},"id":"31933","type":"DatetimeAxis"},{"attributes":{"label":{"value":"Deceased"},"renderers":[{"id":"32010","type":"GlyphRenderer"}]},"id":"32032","type":"LegendItem"},{"attributes":{"num_minor_ticks":5,"tickers":[{"id":"31962","type":"AdaptiveTicker"},{"id":"31963","type":"AdaptiveTicker"},{"id":"31964","type":"AdaptiveTicker"},{"id":"31965","type":"DaysTicker"},{"id":"31966","type":"DaysTicker"},{"id":"31967","type":"DaysTicker"},{"id":"31968","type":"DaysTicker"},{"id":"31969","type":"MonthsTicker"},{"id":"31970","type":"MonthsTicker"},{"id":"31971","type":"MonthsTicker"},{"id":"31972","type":"MonthsTicker"},{"id":"31973","type":"YearsTicker"}]},"id":"31934","type":"DatetimeTicker"},{"attributes":{"line_color":"orange","x":{"field":"x"},"y":{"field":"conf"}},"id":"31953","type":"Line"},{"attributes":{"line_alpha":0.1,"line_color":"#1f77b4","x":{"field":"x"},"y":{"field":"rec"}},"id":"31981","type":"Line"},{"attributes":{"source":{"id":"31921","type":"ColumnDataSource"}},"id":"32011","type":"CDSView"},{"attributes":{"dimension":1,"ticker":{"id":"31939","type":"BasicTicker"}},"id":"31942","type":"Grid"},{"attributes":{"formatter":{"id":"31958","type":"BasicTickFormatter"},"ticker":{"id":"31939","type":"BasicTicker"}},"id":"31938","type":"LinearAxis"},{"attributes":{"months":[0,2,4,6,8,10]},"id":"31970","type":"MonthsTicker"},{"attributes":{"data_source":{"id":"31921","type":"ColumnDataSource"},"glyph":{"id":"31980","type":"Line"},"hover_glyph":null,"muted_glyph":null,"nonselection_glyph":{"id":"31981","type":"Line"},"selection_glyph":null,"view":{"id":"31983","type":"CDSView"}},"id":"31982","type":"GlyphRenderer"},{"attributes":{},"id":"31945","type":"ResetTool"},{"attributes":{"active_drag":"auto","active_inspect":"auto","active_multi":null,"active_scroll":"auto","active_tap":"auto","tools":[{"id":"31943","type":"WheelZoomTool"},{"id":"31944","type":"BoxZoomTool"},{"id":"31945","type":"ResetTool"},{"id":"31946","type":"SaveTool"},{"id":"31977","type":"HoverTool"},{"id":"32005","type":"HoverTool"},{"id":"32033","type":"HoverTool"}]},"id":"31947","type":"Toolbar"},{"attributes":{"months":[0,4,8]},"id":"31971","type":"MonthsTicker"}],"root_ids":["32037"]},"title":"Bokeh Application","version":"1.4.0"}}
        </script>
      </div>

{% endblock %}